<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>First Indochina War ‚Äî Interactive Notes</title>
  <style>
    :root{
      --bg:#ffffff; --ink:#111; --muted:#666; --line:#d9d9d9; --soft:#f4f4f4;
      --ok:#0a7a2f; --no:#b00020;
    }
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--ink);
         max-width: 980px; margin: 24px auto; padding: 0 14px; line-height:1.55;}
    h1{font-size: 1.6rem; margin: 0 0 6px;}
    .sub{color:var(--muted); margin: 0 0 18px;}
    .row{display:flex; gap:12px; flex-wrap:wrap; align-items:stretch;}
    .pill{border:1px solid var(--line); border-radius: 999px; padding: 8px 12px; background:#fff; font-size:0.95rem;}
    .card{border:1px solid var(--line); border-radius:14px; padding:14px; background:#fff; margin: 14px 0;}
    .soft{background:var(--soft); border-radius:12px; padding:12px;}
    details{border:1px solid var(--line); border-radius:14px; padding:10px 12px; background:#fff; margin: 12px 0;}
    summary{cursor:pointer; font-weight:700; font-size:1.05rem; list-style:none;}
    summary::-webkit-details-marker{display:none;}
    .k{font-weight:700;}
    ul{margin:8px 0 0 18px;}
    li{margin: 6px 0;}
    .term{border-bottom: 2px dotted #444; cursor:pointer; padding-bottom:1px;}
    .popup{position:fixed; left:50%; top:18px; transform:translateX(-50%);
      background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08); max-width:min(720px,92vw); display:none; z-index: 20;}
    .popup .t{font-weight:700; margin-bottom:4px;}
    .popup .x{color:var(--muted); font-size:0.95rem;}
    button{padding:8px 10px; border-radius:10px; border:1px solid #aaa; background:#fff; cursor:pointer;}
    button:hover{background:var(--soft);}
    .btnRow{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;}
    .answer{display:none; margin-top:10px; padding:10px; border-radius:12px; background:var(--soft);}
    .mcq .answer{background:#fff; border:1px solid var(--line);}
    .good{color:var(--ok); font-weight:700;}
    .bad{color:var(--no); font-weight:700;}
    .mini{color:var(--muted); font-size:0.95rem;}
    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap:12px;}
    @media (max-width: 820px){ .grid2{grid-template-columns:1fr;} }
    textarea{width:100%; min-height: 90px; padding:10px; border-radius:12px; border:1px solid var(--line); font-family:inherit;}
    .score{font-weight:700;}
  </style>
</head>
<body>

  <h1>First Indochina War (up to 1954) ‚Äî Interactive Notes</h1>
  <p class="sub">Click key terms, test yourself with mini-checks, and reveal model answers. (Works offline. Save as <span class="k">index.html</span>.)</p>

  <div class="row">
    <div class="pill">üß† Terms: click dotted words</div>
    <div class="pill">‚úÖ Checks: MCQs + short responses</div>
    <div class="pill">üìå Progress: saved on this device</div>
  </div>

  <!-- Progress -->
  <div class="card">
    <div class="k">Progress checklist</div>
    <div class="mini">Tick as you go. Your progress saves automatically.</div>
    <div style="margin-top:10px">
      <label><input type="checkbox" class="chk" data-key="done_read_I"> Completed Section I</label><br>
      <label><input type="checkbox" class="chk" data-key="done_read_II"> Completed Section II</label><br>
      <label><input type="checkbox" class="chk" data-key="done_read_III"> Completed Section III</label><br>
      <label><input type="checkbox" class="chk" data-key="done_checks"> Completed all quick checks</label>
    </div>
    <p id="pct" class="score" style="margin-top:10px"></p>
    <div class="btnRow">
      <button onclick="resetProgress()">Reset progress</button>
    </div>
  </div>

  <!-- SECTION I -->
  <details open>
    <summary>I. Background: The Cold War Context</summary>

    <div class="card">
      <div class="k">Global Ideological Conflict</div>
      <ul>
        <li>The First Indochina War extended the Cold War beyond Europe as a <span class="term" data-title="Proxy war" data-def="A conflict where major powers support opposing sides indirectly (money, weapons, advisers) rather than fighting each other openly.">proxy war</span> between communist and anti-communist ideologies.</li>
        <li>The United States was influenced by the <span class="term" data-title="Domino Theory" data-def="The belief that if one country falls to communism, neighbouring countries will follow in sequence like dominoes.">Domino Theory</span> in Southeast Asia.</li>
        <li>This led to <span class="term" data-title="Containment" data-def="A US policy aimed at limiting the spread of communism by supporting anti-communist governments and forces.">containment</span>: providing major support to anti-communist forces to prevent communism spreading in Asia.</li>
      </ul>
    </div>

    <div class="card">
      <div class="k">Communist Support Networks</div>
      <ul>
        <li>North Vietnam received supplies, arms, and advice from the <span class="term" data-title="Soviet Union" data-def="One of the two Cold War superpowers; supported communist movements and states.">USSR</span> and <span class="term" data-title="China (PRC)" data-def="Communist China after 1949; supported North Vietnam with aid, training, and logistics.">China</span>.</li>
        <li>Support was complicated by the <span class="term" data-title="Sino‚ÄìSoviet Split" data-def="The breakdown of relations between China and the USSR, creating rivalry within the communist bloc. North Vietnam had to balance between them to keep aid flowing.">Sino‚ÄìSoviet Split</span>, forcing North Vietnam into a diplomatic balancing act.</li>
        <li>The US often interpreted the conflict through superpower influence, assuming North Vietnam acted mainly as a proxy for the USSR and China.</li>
      </ul>
    </div>

    <!-- Quick check I -->
    <div class="card mcq">
      <div class="k">Quick Check (Section I)</div>
      <p>Which statement best explains why the US became involved in Indochina?</p>
      <div>
        <label><input type="radio" name="q1" value="A"> To support French culture and language in Vietnam</label><br>
        <label><input type="radio" name="q1" value="B"> To apply containment because of the Domino Theory</label><br>
        <label><input type="radio" name="q1" value="C"> To stop the Sino‚ÄìSoviet Split</label>
      </div>
      <div class="btnRow">
        <button onclick="gradeMCQ('q1','B',this,'Containment + Domino Theory drove US policy in Southeast Asia.')">Check</button>
        <button onclick="clearMCQ('q1',this)">Clear</button>
      </div>
      <div class="answer"></div>
    </div>

  </details>

  <!-- SECTION II -->
  <details>
    <summary>II. Weaknesses of the French at Dien Bien Phu</summary>

    <div class="card">
      <div class="k">Strategic Miscalculation</div>
      <ul>
        <li>The French tried to lure the Viet Minh into open battle at ‚Äústrongly defended bases‚Äù, assuming superior firepower would guarantee victory.</li>
        <li>This backfired: the French became trapped in the very location meant to destroy the enemy.</li>
        <li>The choice of a <span class="term" data-title="Valley position" data-def="A valley can be surrounded by higher ground; the enemy can place artillery above and cut off movement.">valley</span> made the base vulnerable to being surrounded and isolated.</li>
      </ul>
    </div>

    <div class="card">
      <div class="k">Logistical Vulnerability</div>
      <ul>
        <li>The Viet Minh cut French supply lines, isolating <span class="term" data-title="Dien Bien Phu" data-def="A major French base in northwest Vietnam. The French were besieged and defeated in 1954, ending serious French hopes of retaining Indochina.">Dien Bien Phu</span>.</li>
        <li>This deprived troops of food, medical supplies, and ammunition, leading to a thorough defeat.</li>
        <li>Without resupply, the French could not sustain the defence of their ‚Äústrongly defended base‚Äù.</li>
      </ul>
    </div>

    <div class="card">
      <div class="k">Collapse of Political Will</div>
      <ul>
        <li>The defeat weakened French public and government support for maintaining Vietnam as a colony.</li>
        <li>The cost in lives and resources outweighed perceived benefits.</li>
        <li>This pressure pushed France towards the <span class="term" data-title="Geneva Conference (1954)" data-def="Talks that ended the First Indochina War. France agreed to withdraw; Vietnam was temporarily divided, recognising the DRV in the North.">Geneva Conference (1954)</span> and withdrawal.</li>
      </ul>
    </div>

    <!-- Quick check II -->
    <div class="card mcq">
      <div class="k">Quick Check (Section II)</div>
      <p>Why did the French ‚Äústrongly defended base‚Äù strategy fail at Dien Bien Phu?</p>
      <div>
        <label><input type="radio" name="q2" value="A"> The Viet Minh refused to fight and simply left Vietnam</label><br>
        <label><input type="radio" name="q2" value="B"> The base was isolated and supply lines were cut, turning the French position into a trap</label><br>
        <label><input type="radio" name="q2" value="C"> The French won militarily but chose to withdraw anyway</label>
      </div>
      <div class="btnRow">
        <button onclick="gradeMCQ('q2','B',this,'Surrounded in a valley + supply lines cut = isolation and defeat.')">Check</button>
        <button onclick="clearMCQ('q2',this)">Clear</button>
      </div>
      <div class="answer"></div>
    </div>

    <!-- Mini writing -->
    <div class="card">
      <div class="k">Mini Task (2‚Äì3 sentences)</div>
      <p class="mini">Explain how <span class="k">geography</span> contributed to the French defeat at Dien Bien Phu.</p>
      <textarea id="geoAns" placeholder="Write your answer here..."></textarea>
      <div class="btnRow">
        <button onclick="saveText('geoAns')">Save</button>
        <button onclick="toggleReveal('geoModel',this)">Reveal model answer</button>
        <button onclick="clearText('geoAns')">Clear</button>
      </div>
      <div id="geoModel" class="answer">
        <span class="good">Model:</span> The French chose a valley base, which allowed the Viet Minh to occupy higher ground around it. From the surrounding hills, the Viet Minh could bombard the base and cut off supply routes, isolating the French and turning their ‚Äústrongly defended base‚Äù into a trap.
      </div>
    </div>

  </details>

  <!-- SECTION III -->
  <details>
    <summary>III. Strengths of the North Vietnamese (Viet Minh)</summary>

    <div class="card">
      <div class="k">Effective Guerrilla Tactics</div>
      <ul>
        <li>Despite inferior equipment, the Viet Minh used <span class="term" data-title="Guerrilla warfare" data-def="Small, mobile attacks (ambushes, sabotage) instead of open battles; relies on local knowledge and surprise.">guerrilla warfare</span> to avoid conventional battles.</li>
        <li>They used extensive hidden tunnel networks to move supplies, shelter, and launch surprise attacks.</li>
        <li>They were battle-hardened and used terrain to neutralise stronger enemies.</li>
      </ul>
    </div>

    <div class="card">
      <div class="k">Popular Support and Mobilisation</div>
      <ul>
        <li>Ho Chi Minh stressed winning the population‚Äôs support; forces were instructed to respect and help peasants.</li>
        <li>This made operations in the countryside effective because fighters could blend with local communities.</li>
        <li>Ideologies were difficult to impose via unpopular governments if local resistance and support networks were strong.</li>
      </ul>
    </div>

    <div class="card">
      <div class="k">Determination and Leadership</div>
      <ul>
        <li>The Viet Minh framed the war as national liberation, boosting morale and resilience.</li>
        <li>They were prepared to accept extremely high losses to remove foreign powers and achieve independence.</li>
      </ul>
    </div>

    <!-- Quick check III -->
    <div class="card mcq">
      <div class="k">Quick Check (Section III)</div>
      <p>Which combination best explains Viet Minh success?</p>
      <div>
        <label><input type="radio" name="q3" value="A"> Heavy tanks + air superiority</label><br>
        <label><input type="radio" name="q3" value="B"> Guerrilla tactics + popular support + determination</label><br>
        <label><input type="radio" name="q3" value="C"> French support from the USSR</label>
      </div>
      <div class="btnRow">
        <button onclick="gradeMCQ('q3','B',this,'They compensated for weaker equipment through tactics, local support, and high morale.')">Check</button>
        <button onclick="clearMCQ('q3',this)">Clear</button>
      </div>
      <div class="answer"></div>
    </div>

    <!-- Model paragraph: judgement -->
    <div class="card">
      <div class="k">Judgement paragraph (attempt ‚Üí reveal)</div>
      <p class="mini">Question: <span class="k">‚ÄúFrench weaknesses were more important than Viet Minh strengths in explaining the 1954 outcome.‚Äù</span> How far do you agree?</p>
      <textarea id="judgementAns" placeholder="Write your answer (4‚Äì6 lines). Try: Point ‚Üí Evidence ‚Üí Explain ‚Üí Link ‚Üí Balance."></textarea>
      <div class="btnRow">
        <button onclick="saveText('judgementAns')">Save</button>
        <button onclick="toggleReveal('judgementModel',this)">Reveal model paragraph</button>
        <button onclick="clearText('judgementAns')">Clear</button>
      </div>
      <div id="judgementModel" class="answer">
        <span class="good">Model:</span> I agree to a large extent that French weaknesses were crucial, because Dien Bien Phu exposed major strategic and logistical failures. By choosing a valley base and underestimating the Viet Minh, the French allowed themselves to be surrounded and cut off from supplies, which made defeat almost inevitable. However, Viet Minh strengths also mattered: guerrilla tactics, popular support, and determination enabled them to sustain pressure, isolate French forces, and accept heavy losses for victory. Overall, French errors created the opportunity, but Viet Minh capability and resolve ensured the French could not recover.
      </div>
    </div>

  </details>

  <!-- Popup -->
  <div id="popup" class="popup" role="dialog" aria-live="polite">
    <div class="t" id="popTitle"></div>
    <div id="popDef"></div>
    <div class="x" style="margin-top:6px;">Click anywhere to close.</div>
  </div>

<script>
  // --- Term popup ---
  const popup = document.getElementById('popup');
  const popTitle = document.getElementById('popTitle');
  const popDef = document.getElementById('popDef');

  document.addEventListener('click', (e) => {
    const t = e.target;
    if (t.classList && t.classList.contains('term')) {
      popTitle.textContent = t.dataset.title || 'Key term';
      popDef.textContent = t.dataset.def || '';
      popup.style.display = 'block';
      return;
    }
    // Close when clicking outside a term
    if (popup.style.display === 'block') popup.style.display = 'none';
  });

  // --- MCQ grading ---
  function gradeMCQ(qName, correct, btn, explain){
    const chosen = document.querySelector(`input[name="${qName}"]:checked`);
    const box = btn.closest('.card').querySelector('.answer');
    box.style.display = 'block';
    if(!chosen){
      box.innerHTML = `<span class="bad">Pick an option first.</span>`;
      return;
    }
    if(chosen.value === correct){
      box.innerHTML = `<span class="good">‚úÖ Correct.</span> <span class="mini">${escapeHTML(explain||'')}</span>`;
    }else{
      box.innerHTML = `<span class="bad">‚ùå Not quite.</span> <span class="mini">Try again, then check the notes above.</span>`;
    }
    // If all 3 MCQs are correct at least once, mark checks done (simple approach: save a flag per q if correct)
    if(chosen.value === correct){
      localStorage.setItem(`mcq_${qName}_correct`, '1');
      checkAllMCQs();
    }
  }

  function clearMCQ(qName, btn){
    document.querySelectorAll(`input[name="${qName}"]`).forEach(r => r.checked = false);
    const box = btn.closest('.card').querySelector('.answer');
    box.style.display = 'none';
    box.textContent = '';
  }

  function checkAllMCQs(){
    const ok1 = localStorage.getItem('mcq_q1_correct') === '1';
    const ok2 = localStorage.getItem('mcq_q2_correct') === '1';
    const ok3 = localStorage.getItem('mcq_q3_correct') === '1';
    if(ok1 && ok2 && ok3){
      // auto-tick "Completed all quick checks"
      const checksBox = document.querySelector(`.chk[data-key="done_checks"]`);
      if(checksBox){
        checksBox.checked = true;
        localStorage.setItem('done_checks', '1');
        updateProgress();
      }
    }
  }

  // --- Reveal boxes ---
  function toggleReveal(id, btn){
    const el = document.getElementById(id);
    if(!el) return;
    el.style.display = (el.style.display === 'block') ? 'none' : 'block';
  }

  // --- Save/clear textarea ---
  function saveText(id){
    const el = document.getElementById(id);
    if(!el) return;
    localStorage.setItem(`text_${id}`, el.value);
  }
  function clearText(id){
    const el = document.getElementById(id);
    if(!el) return;
    el.value = '';
    localStorage.removeItem(`text_${id}`);
  }

  // --- Progress saving ---
  const chks = document.querySelectorAll('.chk');

  function updateProgress(){
    const done = [...chks].filter(c => c.checked).length;
    document.getElementById('pct').textContent = `Completed: ${done}/${chks.length}`;
  }

  chks.forEach(c => {
    const key = c.dataset.key;
    // load
    const saved = localStorage.getItem(key);
    if(saved === '1') c.checked = true;
    c.addEventListener('change', () => {
      localStorage.setItem(key, c.checked ? '1' : '0');
      updateProgress();
    });
  });

  function resetProgress(){
    // checkboxes
    chks.forEach(c => {
      localStorage.removeItem(c.dataset.key);
      c.checked = false;
    });
    // MCQs
    ['q1','q2','q3'].forEach(q => localStorage.removeItem(`mcq_${q}_correct`));
    // textareas
    ['geoAns','judgementAns'].forEach(id => localStorage.removeItem(`text_${id}`));
    document.getElementById('geoAns').value = '';
    document.getElementById('judgementAns').value = '';
    // hide answers
    document.querySelectorAll('.answer').forEach(a => { a.style.display = 'none'; a.textContent=''; });
    updateProgress();
  }

  // --- Load saved textareas ---
  function loadText(id){
    const el = document.getElementById(id);
    if(!el) return;
    const v = localStorage.getItem(`text_${id}`);
    if(v !== null) el.value = v;
  }

  // --- Utility ---
  function escapeHTML(str){
    return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
  }

  // init
  loadText('geoAns');
  loadText('judgementAns');
  updateProgress();
  checkAllMCQs();
</script>

</body>
</html>
